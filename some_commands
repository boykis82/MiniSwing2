docker compose up mysql-plm mysql-customer mysql-service mysql-product rabbitmq -d

docker compose up mysql-plm mysql-customer -d

docker compose up mysql-service mysql-product rabbitmq -d

docker compose up mysql-service mysql-product zookeeper kafka -d

Docker-compose build

Docker-compose up -d
docker compose down

Docker-compose logs -f


http://localhost:8080/eureka/web

kill $(pgrep -f microservices)
kill $(pgrep -f eureka)
kill $(pgrep -f gateway)

docker network inspect -f '{{json .Containers}}' e6c42dd5453d | jq '.[] | .Name + ":" + .IPv4Address'

docker-compose exec kafka /opt/kakfa/bin/kafka-topics.sh --zookeeper zookeeper --list


java -jar microservices/customer-service/customer-server/build/libs/*.jar &
java -jar microservices/plm-service/plm-server/build/libs/*.jar &

java -jar microservices/product-service/product-server/build/libs/*.jar &
java -jar microservices/service-service/service-server/build/libs/*.jar &
java -jar spring-cloud/gateway/build/libs/*.jar &
java -jar spring-cloud/eureka-server/build/libs/*.jar &


# minikube cluster 시작 & 일부 폴더 마운트
#minikube start -p miniswing --memory 4096 --cpus 3 --driver=hyperv --mount --mount-string="D:/java/MiniSwing2/:/miniswing/"
minikube start -p miniswing --driver=hyperv --mount --mount-string="D:/java/MiniSwing2/:/miniswing/"

minikube mount D:/java/MiniSwing2/:/miniswing/

minikube profile miniswing

# minikube docker engine 연결
minikube docker-env
minikube -p miniswing docker-env | Invoke-Expression 
or 
minikube docker-env | Invoke-Expression 


# configmap 생성
kubectl create configmap config-repo --from-file=../MiniSwing-config/ --save-config

# secret 생성
kubectl create secret generic config-server-secrets --from-literal=ENCRYPT_KEY=my-very-secure-encrypt-key --save-config

# k8s 시작
kubectl apply -k .\kubernetes\services\overlays\dev

# k8s get pods
kubectl get pods

# k8s 삭제
kubectl delete deployment mysql-plm mysql-customer mysql-product mysql-service product service plm gateway  config-server customer rabbitmq
kubectl delete svc mysql-plm mysql-customer mysql-product mysql-service product service plm gateway  config-server customer rabbitmq